<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/cosmo/bootstrap.min.css" />
        <title>Générateur de tokens Linky</title>
    </head>
    <body>
        <div class="container">
            <div class="jumbotron mt-5 py-5">
                <!-- index -->
                <h1 class="display-4">Linky auth</h1>
                <h4>
                    Générateur de tokens permettant d'utiliser
                    <a href="https://github.com/bokub/linky/tree/datahub"><code>bokub/linky</code></a>
                    en tant que module javascript, ou en ligne de commande.
                </h4>
                <hr class="my-4" />
                <div style="font-size: 1.1rem">
                    En utilisant le module npm
                    <a href="https://github.com/bokub/linky/tree/datahub"><code>bokub/linky</code></a
                    >, vous pouvez récupérer votre consommation éléctrique à des fins personnelles.
                    <br />
                    <br />
                    Pour ce faire, vous avez besoin:<br />
                    <ul>
                        <li>D'un compteur Linky</li>
                        <li>D'un espace personnel Enedis</li>
                        <li>De tokens, que vous allez pouvoir générer grâce à cet outil</li>
                    </ul>
                    <br />

                    <div class="alert alert-light" role="alert">
                        <b>N.B:</b> Cet outil a pour <u>seul but</u> de servir de relais entre le module
                        <code>bokub/linky</code> et les serveurs d'Enedis lors de la génération de tokens, nécéssaires
                        pour accéder à votre consommation Linky.
                        <br />
                        <br />
                        Vos tokens ne font que transiter et ne sont jamais stockés. Vos données de consommation ne
                        passent pas par ce serveur et sont directement collectées par <code>bokub/linky</code>, sur
                        votre machine.
                        <br />
                        <br />
                        Le code de ce serveur est 100% open-source et peut être consulté
                        <a href="https://github.com/bokub/linky/tree/datahub/server">sur Github</a>.
                    </div>

                    Cliquez sur le boutton ci-dessous pour générer de nouveaux tokens. Vous serez redirigé vers votre
                    espace personnel Enedis afin de donner votre accord
                </div>
                <div class="row justify-content-center mt-5">
                    <div class="col-auto">
                        <a class="btn-link" href="/api/auth" role="button">
                            <img width="240" src="bleu-enedis.png" alt="J'accède à mon espace client Enedis" />
                        </a>
                    </div>
                </div>
                <!-- index -->
                <!--                <form>-->
                <form style="display: none">
                    <h1 class="display-4">Vos tokens</h1>

                    <div class="form-group row mt-4">
                        <label for="accessToken" class="col-2 col-form-label">Access Token</label>
                        <div class="col-10">
                            <input
                                type="text"
                                readonly
                                class="form-control text-monospace"
                                id="accessToken"
                                value="%access_token%"
                            />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="accessToken" class="col-2 col-form-label">Refresh Token</label>
                        <div class="col-10">
                            <input
                                type="text"
                                readonly
                                class="form-control text-monospace"
                                id="refreshToken"
                                value="%refresh_token%"
                            />
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="usagePointsId" class="col-2 col-form-label">Usage Point IDs</label>
                        <div class="col-10">
                            <textarea class="form-control text-monospace" id="usagePointsId" rows="2" readonly>
%usage_points_id%</textarea
                            >
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="command" class="col-2 col-form-label"
                            >Exemple de commande pour <code>bokub/linky</code></label
                        >
                        <div class="col-10">
                            <textarea class="form-control text-monospace" id="command" rows="2" readonly>
linky auth -a %access_token% -r %refresh_token% -u %usage_point_id%</textarea
                            >
                        </div>
                    </div>
                    <div class="row justify-content-center mt-5">
                        <div class="col-auto">
                            <a class="btn btn-primary btn-lg" href="/" role="button">Retour à l'accueil</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </body>
</html>
